<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" th:with="activeMenu='home'">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>대시보드</title>

    <link rel="stylesheet" th:href="@{/css/app.css}"/>

    <script th:src="@{/js/jquery-3.7.1.js}"></script>
    <script th:src="@{/js/jquery.cookie.js}"></script>
</head>

<body>
<div class="app-shell">

    <!-- HEADER -->
    <div th:replace="~{comm/header :: header(activeMenu=${activeMenu})}"></div>

    <!-- CONTENT -->
    <main class="content">
        <section class="board">

            <div class="board-head">
                <h1 class="board-title">공지사항</h1>
                <a class="btn btn-primary" th:href="@{/support/notice/new}">공지 등록</a>
            </div>

            <div class="board-card">
                <div class="table-wrap">
                    <table class="tbl">
                        <thead>
                        <tr>
                            <th style="width:90px;">번호</th>
                            <th>제목</th>
                            <th style="width:160px;">작성일</th>
                            <th style="width:120px;">조회수</th>
                            <th style="width:120px;">관리</th>  <!-- ✅ 추가 -->
                            <th style="width:140px;">작성자</th>

                        </tr>
                        </thead>

                        <tbody>
                        <tr th:if="${#lists.isEmpty(notices)}">
                            <td class="empty" colspan="5">등록된 공지사항이 없습니다.</td> <!-- ✅ 4 -> 5 -->
                        </tr>

                        <tr th:each="n : ${notices}">
                            <td class="t-center" th:text="${n.noticeId}">1</td>

                            <td class="title-cell">
                                <span th:if="${n.isTop == 1 or n.isTop == '1'}" class="badge badge-top">상단</span>

                                <a th:href="@{/support/notice/detail(noticeId=${n.noticeId})}"
                                   th:text="${n.title}">제목</a>
                            </td>

                            <td class="t-center" th:text="${#temporals.format(n.createdAt, 'yyyy-MM-dd')}">2024-05-02</td>
                            <td class="t-center" th:text="${n.views}">5</td>

                                <!-- ✅ 삭제 버튼 -->
                                <td class="t-center">
                                    <form th:action="@{/support/notice/delete}" method="POST"
                                          onsubmit="return confirm('정말 삭제할까요?');">
                                        <input type="hidden" name="noticeId" th:value="${n.noticeId}">
                                        <button type="submit" class="btn btn-danger btn-sm">삭제</button>
                                    </form>
                                </td>
                            <td class="t-center" th:text="${n.writer}">admin</td>
                        </tr>
                        </tbody>


                    </table>
                </div>
            </div>

            <div class="pager">
                <a class="page-btn" href="javascript:void(0)">«</a>
                <a class="page-btn" href="javascript:void(0)">‹</a>
                <a class="page-btn active" href="javascript:void(0)">1</a>
                <a class="page-btn" href="javascript:void(0)">2</a>
                <a class="page-btn" href="javascript:void(0)">3</a>
                <a class="page-btn" href="javascript:void(0)">›</a>
                <a class="page-btn" href="javascript:void(0)">»</a>
            </div>

        </section>
    </main>




    <!-- FOOTER -->
    <div th:replace="~{comm/footer :: footer}"></div>

</div>
</body>
</html>
